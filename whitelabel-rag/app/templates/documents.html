{% extends "base.html" %}
{% block title %}Documents - WhiteLabelRAG{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2>Documents</h2>
    <div class="accordion" id="documentsAccordion">
        {% for doc in documents %}
        <div class="accordion-item mb-2">
            <h2 class="accordion-header" id="heading{{ loop.index }}">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapse{{ loop.index }}" aria-expanded="false"
                    aria-controls="collapse{{ loop.index }}">
                    <span class="badge bg-primary me-2">{{ doc.name }}</span>
                    <span class="text-muted small">({{ doc.type|upper }})</span>
                </button>
            </h2>
            <div id="collapse{{ loop.index }}" class="accordion-collapse collapse"
                aria-labelledby="heading{{ loop.index }}" data-bs-parent="#documentsAccordion">
                <div class="accordion-body">
                    <div>
                        <strong>Meta:</strong>
                        <ul>
                            <li>Size: {{ doc.size }} bytes</li>
                            <li>Uploaded: {{ doc.uploaded }}</li>
                            <li>Source: {{ doc.source }}</li>
                        </ul>
                    </div>
                    <div class="mt-2">
                        <a href="{{ url_for('main.open_document', doc_id=doc.id) }}" class="btn btn-sm btn-success">Open</a>
                        <a href="{{ url_for('main.edit_document', doc_id=doc.id) }}" class="btn btn-sm btn-secondary">Edit</a>
                        <form method="post" action="{{ url_for('main.delete_document', doc_id=doc.id) }}" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this document?')">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="alert alert-info">No documents found.</div>
        {% endfor %}
    </div>
</div>
{% endblock %}
